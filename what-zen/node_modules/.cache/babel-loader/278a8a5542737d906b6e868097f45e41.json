{"ast":null,"code":"import _defineProperty from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/src/components/Chat/index.js\";\nimport React, { Component } from 'react';\nimport { AuthUserContext } from '../Session';\nimport app from 'firebase/app';\nimport _ from 'lodash';\n\nvar Chat =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Chat, _Component);\n\n  function Chat(props) {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chat).call(this, props));\n    _this.updateInput = _this.updateInput.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addMessage = _this.addMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      message: '',\n      user: _this.props.db,\n      useremail: '',\n      dateCreated: '',\n      messages: []\n    };\n    app.database().ref('chat').on('value', function (snapshot) {\n      _this.getMessages(snapshot.val());\n    });\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"getMessages\",\n    value: function getMessages(values) {\n      console.log(\"sherif\");\n      console.log(values);\n\n      var messages = _(values).keys().map(function (messageKey) {\n        var cloned = _.clone(values[messageKey]);\n\n        cloned.key = messageKey;\n        return cloned;\n      }).value();\n\n      this.setState({\n        messages: messages\n      });\n    }\n  }, {\n    key: \"updateInput\",\n    value: function updateInput(e) {\n      e.preventDefault();\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"addMessage\",\n    value: function addMessage(e) {\n      var mess = this.props.useremail + \" said: \" + this.state.message;\n      e.preventDefault();\n      app.database().ref('chat').push({\n        message: mess,\n        useremail: this.props.useremail,\n        dateCreated: Date.now()\n      });\n      this.setState({\n        message: ''\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // get messages to display\n      var messagesToDisply = this.state.messages.map(function (message) {\n        return message.message;\n      }).join(\"\\n\");\n      return React.createElement(\"div\", {\n        className: \"Chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, function (authUser) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, \"New message\"), React.createElement(\"textarea\", {\n          disabled: true,\n          className: \"text-area\",\n          rows: \"20\",\n          cols: \"40\",\n          name: \"messageList\",\n          type: \"text\",\n          value: messagesToDisply,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }), React.createElement(\"form\", {\n          action: \"#\",\n          onSubmit: _this2.addMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"hidden\",\n          name: \"username\",\n          value: \"Sherif\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          required: true,\n          className: \"input\",\n          name: \"message\",\n          onChange: _this2.updateInput,\n          type: \"text\",\n          placeholder: \"Enter a new message here\",\n          value: _this2.state.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }))));\n      }));\n    }\n  }]);\n\n  return Chat;\n}(Component); // export default NewCardForm;\n//\n// function Chat() {\n//\n//   // addCard(e){\n//   //    e.preventDefault();\n//   //    app.database().ref('/chats').push({\n//   //      message: this.state.message,\n//   //      user:\n//   //    });\n//   //    this.setState({\n//   //      title: '',\n//   //      status: 'To do'\n//   //    });\n//   //  }\n//\n//\n//   return(\n//     <div>\n//     <textarea\n//       className=\"text-area\"\n//       rows=\"20\"\n//       cols=\"40\"\n//       name=\"details\"\n//       // onChange={this.updateInput}\n//       type=\"text\"\n//       // value={this.state.details}\n//       />\n//       <br />\n//         <input\n//           className=\"input\"\n//           name=\"title\"\n//           id=\"newTaskTitleField\"\n//           // onChange={this.updateInput}\n//           type=\"text\"\n//           placeholder=\"Enter a message to chat\"\n//           // value={this.state.title}\n//         />\n//     </div>\n//   )\n// }\n\n\nexport default Chat; // User has: doCreateUserWithEmailAndPassword\n// index.js:32 User has: doSignInWithEmailAndPassword\n// index.js:32 User has: doSignOut\n// index.js:32 User has: doPasswordReset\n// index.js:32 User has: doPasswordUpdate\n// index.js:32 User has: user\n// index.js:32 User has: users\n// index.js:32 User has: cards\n// index.js:32 User has: auth\n// index.js:32 User has: db","map":{"version":3,"sources":["/Users/david/Desktop/projects/final_project_weeks/what-zen-app/what-zen/src/components/Chat/index.js"],"names":["React","Component","AuthUserContext","app","_","Chat","props","updateInput","bind","addMessage","state","message","user","db","useremail","dateCreated","messages","database","ref","on","snapshot","getMessages","val","values","console","log","keys","map","messageKey","cloned","clone","key","value","setState","e","preventDefault","target","name","mess","push","Date","now","messagesToDisply","join","authUser"],"mappings":"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UAA1B;AAAqC,UAAA,KAAK,EAAC,QAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAEE;AACE,UAAA,QAAQ,MADV;AAEE,UAAA,SAAS,EAAC,OAFZ;AAGE,UAAA,IAAI,EAAC,SAHP;AAIE,UAAA,QAAQ,EAAE,MAAI,CAACF,WAJjB;AAKE,UAAA,IAAI,EAAC,MALP;AAME,UAAA,WAAW,EAAC,0BANd;AAOE,UAAA,KAAK,EAAE,MAAI,CAACG,KAAL,CAAWC,OAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADF,CAbF,CADS;AAAA,OADX,CADA,CADF;AAuCD;;;;EA7FgBV,S,GAgGnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAeI,IAAf,C,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { Component } from 'react';\nimport { AuthUserContext } from '../Session';\nimport app from 'firebase/app';\nimport _ from 'lodash';\n\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props)\n    this.updateInput = this.updateInput.bind(this);\n    this.addMessage = this.addMessage.bind(this);\n    this.state = {\n      message: '',\n      user: this.props.db,\n      useremail: '',\n      dateCreated: '',\n      messages: []\n    }\n\n    app.database().ref('chat').on('value', snapshot => {\n      this.getMessages(snapshot.val());\n    });\n  }\n\n  getMessages(values) {\n    console.log(\"sherif\");\n    console.log(values);\n    let messages = _(values)\n    .keys()\n    .map(messageKey => {\n      let cloned = _.clone(values[messageKey]);\n      cloned.key = messageKey;\n      return cloned;\n    })\n    .value();\n    this.setState({messages: messages});\n  }\n\n  updateInput(e){\n    e.preventDefault();\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  addMessage(e){\n    let mess = this.props.useremail + \" said: \" + this.state.message;\n    e.preventDefault();\n    app.database().ref('chat').push({\n      message: mess,\n      useremail: this.props.useremail,\n      dateCreated: Date.now()\n    });\n    this.setState({\n      message: '',\n    });\n  }\n\n  render() {\n    // get messages to display\n    let messagesToDisply = this.state.messages.map((message) => message.message).join(\"\\n\");\n\n    return (\n      <div className=\"Chat\">\n      <AuthUserContext.Consumer>\n        {authUser => (\n        <div>\n          <p>New message</p>\n          <textarea\n             disabled\n             className=\"text-area\"\n             rows=\"20\"\n             cols=\"40\"\n             name=\"messageList\"\n             type=\"text\"\n             value={messagesToDisply}\n\n             />\n             <br />\n          <form action=\"#\" onSubmit={this.addMessage}>\n            <div>\n              <input type='hidden' name='username' value='Sherif'/>\n              <input\n                required\n                className=\"input\"\n                name=\"message\"\n                onChange={this.updateInput}\n                type=\"text\"\n                placeholder=\"Enter a new message here\"\n                value={this.state.message}\n              />\n            </div>\n          </form>\n        </div>\n\n        )}\n      </AuthUserContext.Consumer>\n\n\n      </div>\n    );\n  }\n}\n\n// export default NewCardForm;\n//\n// function Chat() {\n//\n//   // addCard(e){\n//   //    e.preventDefault();\n//   //    app.database().ref('/chats').push({\n//   //      message: this.state.message,\n//   //      user:\n//   //    });\n//   //    this.setState({\n//   //      title: '',\n//   //      status: 'To do'\n//   //    });\n//   //  }\n//\n//\n//   return(\n//     <div>\n//     <textarea\n//       className=\"text-area\"\n//       rows=\"20\"\n//       cols=\"40\"\n//       name=\"details\"\n//       // onChange={this.updateInput}\n//       type=\"text\"\n//       // value={this.state.details}\n//       />\n//       <br />\n//         <input\n//           className=\"input\"\n//           name=\"title\"\n//           id=\"newTaskTitleField\"\n//           // onChange={this.updateInput}\n//           type=\"text\"\n//           placeholder=\"Enter a message to chat\"\n//           // value={this.state.title}\n//         />\n//     </div>\n//   )\n// }\n\nexport default Chat\n\n\n// User has: doCreateUserWithEmailAndPassword\n// index.js:32 User has: doSignInWithEmailAndPassword\n// index.js:32 User has: doSignOut\n// index.js:32 User has: doPasswordReset\n// index.js:32 User has: doPasswordUpdate\n// index.js:32 User has: user\n// index.js:32 User has: users\n// index.js:32 User has: cards\n// index.js:32 User has: auth\n// index.js:32 User has: db\n"]},"metadata":{},"sourceType":"module"}